{"version":3,"mappings":"u1DAAA,MAAMA,EAAW,QACjB,QAAQ,IAAI,WAAYA,CAAQ,qVCOnBC,EAAS,CACrB,CACC,KAAM,IACN,KAAM,OACN,UAAW,IAAMC,EAAA,WAAO,wBAAsB,qKAC9C,KAAM,CACL,MAAO,IACR,CACD,EAAE,CACD,KAAM,UACN,KAAM,SACN,UAAW,IAAMA,EAAA,WAAO,qBAAmB,iHAC3C,KAAM,CACL,MAAO,IACR,CACD,EAAG,CACF,KAAM,SACN,KAAM,QACN,UAAW,IAAMA,EAAA,WAAO,qBAAmB,iHAC3C,KAAM,CACL,MAAO,MACR,CACD,EAAG,CACF,KAAM,UACN,KAAM,SACN,UAAW,IAAMA,EAAA,WAAO,sBAAoB,iKAC5C,KAAM,CACL,MAAO,aACR,CACD,EAAI,CACH,KAAM,UACN,KAAM,SACN,UAAW,IAAMA,EAAA,WAAO,sBAAoB,2FAC5C,KAAM,CACL,MAAO,KACR,CACD,EAAG,CACF,KAAM,iBACN,KAAM,gBACN,UAAW,IAAMA,EAAA,WAAO,6BAA2B,wJACnD,KAAM,CACL,MAAO,MACR,CACD,EAAG,CACF,KAAM,QACN,KAAM,OACN,UAAW,IAAMA,EAAA,WAAO,oBAAkB,+GAC1C,KAAM,CACL,MAAO,MACR,CACD,CACD,EAEMC,EAASC,EAAa,CAC3B,QAASC,EAAqB,EAC9B,OAAAJ,EACA,eAAeK,EAAKC,EAAOC,EAAe,CACzC,OAAIA,GAGG,CAAE,KAAM,EAAG,IAAK,CAAE,CAC1B,CACD,CAAC,EAEDL,EAAO,WAAW,CAACM,EAAIF,EAAOG,IAAS,CAE7B,eAAQD,EAAG,KAAK,MACpBC,GACN,CAAC,ECxEuBC,EAAY,QAAS,IAAM,CAC3C,MAAAC,EAAKC,EAAI,CAAC,EACVC,EAAQD,EAAI,CAAC,EAEbE,EAASC,EAAS,IAAMJ,CAAE,EAKhC,MAAO,CAAE,GAAAA,EAAI,MAAAE,EAAO,OAAAC,EAAQ,IAHhB,IAAMD,EAAM,QAGS,IAFrB,IAAMA,EAAM,OAEa,CACvC,EAAG,CAAE,QAAS,GAAO,EAGrB,MAAMG,EAAQC,EAAY,EAC1BD,EAAM,IAAIE,CAAkB,ECf5B,MAAMC,CAAM,CAEX,aAAc,CACb,KAAK,KAAO,EACb,CACA,KAAM,CACD,IAAAC,EAAS,KAAK,KAAK,OACvB,OAAIA,IAAW,EACP,GAED,KAAK,KAAKA,EAAS,CAAC,CAC5B,CACA,KAAM,CACE,YAAK,KAAK,KAClB,CAEA,SAASC,EAAc,CACf,YAAK,KAAK,SAASA,CAAI,CAC/B,CACA,KAAKA,EAAc,CACb,UAAK,KAAKA,CAAI,CACpB,CAEA,OAAOC,EAAeC,EAAa,CAClC,KAAK,KAAO,KAAK,KAAK,MAAMD,EAAOC,CAAG,CACvC,CACD,CAEA,MAAMC,EAAQ,IAAIL,EACZM,EAAQC,EAA6C,CAC1D,OAAQ,CAAC,EACT,KAAM,EACP,CAAC,EAEKC,EAAW,IAAM,CAClBF,EAAM,OAAO,OAAS,GACzBA,EAAM,OAAO,KAEf,EACMG,EAAYP,GAAiB,CAC5BI,EAAA,OAAO,KAAKJ,CAAI,CACvB,EAGAnB,EAAO,WAAW,CAACM,EAAIqB,EAAMpB,IAAS,CAErC,MAAMqB,EAAWD,EAAK,KAChBE,EAASvB,EAAG,KACdsB,EACCN,EAAM,IAAI,IAAMO,GACnBP,EAAM,IAAI,EACVC,EAAM,KAAO,WAEJE,KACCnB,EAAG,MAAM,UAAY,WAC/BiB,EAAM,KAAO,WACbA,EAAM,OAAO,MACPA,EAAA,OAAO,KAAKM,CAAM,IAExBP,EAAM,KAAKM,CAAQ,EACnBL,EAAM,KAAO,WACbG,EAASG,CAAM,GAGhBH,EAASG,CAAM,EAGXtB,GACN,CAAC,EAEM,MAAMuB,EAAiB,CAC7B,QAAQC,EAAU,CAEjB,MAAMC,EAAY,CACjB,KAAM,iBACN,WAAY,GACZ,OAAOD,EAAU,CAChB,MAAME,EAAQF,EAAI,OACZG,EAAY,CAACC,EAAEC,EACpB,CAAE,QAASb,EAAM,MAAO,EACxBU,EAAM,QAAQ,EAAE,EAOV,OALYE,EAClBE,EACA,CAAE,KAAMd,EAAM,IAAK,EACnB,IAAMW,CAAA,CAGR,GAEGH,EAAA,UAAU,iBAAkBC,CAAS,CAC1C,CACD,EC5FMM,EAAe,IAAM,CACpB,4BAAwB,KAAK,EAAE,SAAS,EAC5C,KAAMC,GACFA,EAAI,QAAU,IACVA,EAAI,OAEL,QAAQ,OAAOA,CAAG,CACzB,EACA,KAAMC,GAAW,CACT,YAAI,IAAKA,EAAO,CAAC,EACnB,MAAAC,EAAO,aAAa,QAAQ,cAAc,EACxC,YAAI,OAAQA,CAAI,EAEpBA,GAAQ,MAAQA,GAAQD,EAAO,GAClC,QAAQ,IAAI,MAAM,EACL,qBAAQ,eAAgBA,EAAO,CAAC,GAE7CE,EAAW,MAAM,CAChB,MAAO,KACP,QAAS,gBACT,OAAQ,GACR,QAAS,KACT,EAAE,KAAK,IAAM,CACA,qBAAQ,eAAgBF,EAAO,CAAC,EAC7C,OAAO,SAAS,QAAO,CACvB,CACF,CACA,CACH,GAEE,SAAUG,EAAK,CAEZA,EAAA,OAASC,EAAe,QAAQ,EAChCD,EAAA,OAASC,EAAe,QAAQ,EAChCD,EAAA,GAAKC,EAAe,IAAI,EACxBD,EAAA,MAAQC,EAAe,OAAO,EAC9BD,EAAA,aAAeC,EAAe,eAAgB,EAAE,EACpDD,EAAI,OAASC,EAAe,SAAUC,EAAO,EAAE,EAC3CF,EAAA,UAAYC,EAAe,QAAS,EAAE,EAEDN,GAC1C,GAAG,OAAO,cAAc,ECjCxBQ,EAAuB,CAAE,UAAW,WAAY,SAAU,QAAU,GAEpE,MAAMC,EAAM,OACZ,QAAQ,IAAIA,CAAG,GAEb,SAAY,CACN,MAAAC,EAAW,MAAMjD,EAAA,WAAO,4BAAU,8GAAE,KAAKwC,GAAOA,EAAI,OAAO,EACjE,IAAIS,CAAS,KAIf,MAAMjB,EAAMkB,EAAUC,CAAG,EAEzBnB,EAAI,IAAID,CAAc,EAAE,IAAI9B,CAAM,EAAE,IAAIc,CAAK,EAAE,MAAM,MAAM","names":["isBuried","routes","__vitePreload","router","createRouter","createWebHashHistory","_to","_from","savedPosition","to","next","defineStore","id","ref","count","getter","computed","pinia","createPinia","piniaPluginPersist","Stack","length","name","start","end","stack","state","reactive","popCache","addCache","from","fromName","toName","FadeTransition","app","component","slots","keepAlive","h","KeepAlive","Transition","checkVersion","res","remote","time","xdJsbridge","win","getQueryParams","device","setToastDefaultOptions","env","VConsole","createApp","App"],"sources":["../../src/utils/trackBefore.ts","../../src/router/index.ts","../../src/store/index.ts","../../src/utils/transition.ts","../../src/utils/before.ts","../../src/main.ts"],"sourcesContent":["const isBuried = import.meta.env.VITE_BURIED\r\nconsole.log('是否开启h5埋点', isBuried)\r\n\r\nif (isBuried === 'true') {\r\n  (function (w: any, d: Document, s: \"script\", q: string, i: string) {\r\n    w[q] = w[q] || [];\r\n    var j = d.createElement(s)\r\n    var f = d.getElementsByTagName(s)[0] \r\n    j.async = true;\r\n    j.id = 'beacon-aplus';\r\n    j.src = 'https://d.alicdn.com/alilog/mlog/aplus/' + i + '.js';\r\n    f.parentNode?.insertBefore(j, f);\r\n  })(window, document, 'script', 'aplus_queue', '203467608');\r\n\r\n  const { aplus_queue } = window\r\n  // 集成应用的appKey\r\n  aplus_queue.push({\r\n    action: 'aplus.setMetaInfo',\r\n    arguments: ['appKey', '63969d7c88ccdf4b7ea1ef25']\r\n  });\r\n\r\n  // 关闭自动pv\r\n  aplus_queue.push({\r\n    action: 'aplus.setMetaInfo',\r\n    arguments: ['aplus-waiting', 'MAN']\r\n  });\r\n}","import { createRouter, createWebHashHistory } from 'vue-router'\r\n\r\ndeclare module 'vue-router' {\r\n\tinterface RouteMeta {\r\n\t\ttitle: string\r\n\t}\r\n}\r\n\r\nexport const routes = [\r\n\t{\r\n\t\tpath: \"/\",\r\n\t\tname: \"home\",\r\n\t\tcomponent: () => import(\"../view/Protocol.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"首页\"\r\n\t\t}\r\n\t},{\r\n\t\tpath: \"/hourse\",\r\n\t\tname: \"hourse\",\r\n\t\tcomponent: () => import(\"../view/House.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"小屋\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: \"/about\",\r\n\t\tname: \"about\",\r\n\t\tcomponent: () => import(\"../view/About.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"关于我们\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: '/circle',\r\n\t\tname: 'circle',\r\n\t\tcomponent: () => import(\"../view/Circle.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"圈子3.3.3交互协议\"\r\n\t\t}\r\n\t},  {\r\n\t\tpath: '/script',\r\n\t\tname: 'script',\r\n\t\tcomponent: () => import(\"../view/Script.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"字符串\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: '/saveMedieFile',\r\n\t\tname: 'saveMedieFile',\r\n\t\tcomponent: () => import(\"../view/SaveMedieFile.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"保存文件\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: '/test',\r\n\t\tname: 'test',\r\n\t\tcomponent: () => import(\"../view/Test.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"test\"\r\n\t\t}\r\n\t}\r\n]\r\n\r\nconst router = createRouter({\r\n\thistory: createWebHashHistory(),\r\n\troutes,\r\n\tscrollBehavior(_to, _from, savedPosition) {\r\n\t\tif (savedPosition) {\r\n\t\t\treturn savedPosition\r\n\t\t}\r\n\t\treturn { left: 0, top: 0 }\r\n\t}\r\n})\r\n\r\nrouter.beforeEach((to, _from, next) => {\r\n\t// \\u200E 空title\r\n\tdocument.title = to.meta.title\r\n\tnext()\r\n})\r\nexport default router\r\n","import { createPinia, defineStore } from 'pinia'\r\nimport piniaPluginPersist from 'pinia-plugin-persistedstate'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport const useStore = defineStore(\"index\", () => {\r\n  const id = ref(1)\r\n  const count = ref(0)\r\n\r\n  const getter = computed(() => id)\r\n\r\n  const add = () => count.value++\r\n  const cut = () => count.value--\r\n\r\n  return { id, count, getter, add, cut }\r\n}, { persist: false })\r\n\r\n\r\nconst pinia = createPinia()\r\npinia.use(piniaPluginPersist)\r\n\r\nexport default pinia","import { reactive, h, KeepAlive, Transition } from 'vue'\r\nimport router from '../router/index'\r\n\r\nclass Stack {\r\n\tprivate data: string[]\r\n\tconstructor() {\r\n\t\tthis.data = [];\r\n\t}\r\n\tget() {\r\n\t\tlet length = this.data.length;\r\n\t\tif (length === 0) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn this.data[length - 1];\r\n\t}\r\n\tpop() {\r\n\t\treturn this.data.pop();\r\n\t}\r\n\r\n\tincludes(name: string) {\r\n\t\treturn this.data.includes(name);\r\n\t}\r\n\tpush(name: string) {\r\n\t\tthis.data.push(name);\r\n\t}\r\n\r\n\tsplice(start: number, end: number) {\r\n\t\tthis.data = this.data.slice(start, end);\r\n\t}\r\n}\r\n\r\nconst stack = new Stack();\r\nconst state = reactive<{ caches: string[], name: string }>({\r\n\tcaches: [],\r\n\tname: ''\r\n})\r\n\r\nconst popCache = () => {\r\n\tif (state.caches.length > 0) {\r\n\t\tstate.caches.pop();\r\n\t}\r\n};\r\nconst addCache = (name: string) => {\r\n\tstate.caches.push(name);\r\n};\r\n\r\n/** 有好方法可以优化页面是进入还是退出 */\r\nrouter.beforeEach((to, from, next) => {\r\n\t// 前进存入，后退清除\r\n\tconst fromName = from.name as string;\r\n\tconst toName = to.name as string;\r\n\tif (fromName) {\r\n\t\tif (stack.get() === toName) {\r\n\t\t\tstack.pop();\r\n\t\t\tstate.name = 'left-out'\r\n\t\t\t// editState(\"left-out\");\r\n\t\t\tpopCache();\r\n\t\t} else if (to.query.replace === \"replace\") {\r\n\t\t\tstate.name = 'right-in'\r\n\t\t\tstate.caches.pop();\r\n\t\t\tstate.caches.push(toName)\r\n\t\t} else {\r\n\t\t\tstack.push(fromName);\r\n\t\t\tstate.name = 'right-in'\r\n\t\t\taddCache(toName);\r\n\t\t}\r\n\t} else {\r\n\t\taddCache(toName);\r\n\t}\r\n\r\n\tnext()\r\n})\r\n\r\nexport const FadeTransition = {\r\n\tinstall(app: any) {\r\n\t\t// 配置此应用\r\n\t\tconst component = {\r\n\t\t\tname: 'FadeTransition',\r\n\t\t\tfunctional: true,\r\n\t\t\trender(app: any) {\r\n\t\t\t\tconst slots = app.$slots\r\n\t\t\t\tconst keepAlive = [h(KeepAlive,\r\n\t\t\t\t\t{ include: state.caches },\r\n\t\t\t\t\tslots.default())]\r\n\r\n\t\t\t\tconst transition = h(\r\n\t\t\t\t\tTransition,\r\n\t\t\t\t\t{ name: state.name },\r\n\t\t\t\t\t() => keepAlive\r\n\t\t\t\t)\r\n\t\t\t\treturn transition\r\n\t\t\t}\r\n\t\t}\r\n\t\tapp.component(\"FadeTransition\", component)\r\n\t}\r\n}\r\n\r\nexport default {}","import { device, getQueryParams, xdJsbridge } from \"wnl-xdsdk\"\r\n\r\n// 检查版本\r\nconst checkVersion = () => {\r\n\tfetch(\"version.json?t=\" + new Date().getTime())\r\n\t\t.then((res) => {\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\treturn res.json()\r\n\t\t\t}\r\n\t\t\treturn Promise.reject(res)\r\n\t\t})\r\n\t\t.then((remote) => {\r\n\t\t\tconsole.log(\"t\", remote.t)\r\n\t\t\tconst time = localStorage.getItem(\"lastModified\")\r\n\t\t\tconsole.log(\"time\", time)\r\n\r\n\t\t\tif (time == null || time == remote.t) {\r\n\t\t\t\tconsole.log(\"版本一致\")\r\n\t\t\t\tlocalStorage.setItem(\"lastModified\", remote.t)\r\n\t\t\t} else {\r\n\t\t\t\txdJsbridge.popup({\r\n\t\t\t\t\ttitle: \"提示\",\r\n\t\t\t\t\tcontent: \"检测到有新版本，请刷新页面\",\r\n\t\t\t\t\tcancel: '',\r\n\t\t\t\t\tconfirm: '刷新'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlocalStorage.setItem(\"lastModified\", remote.t)\r\n\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n}\r\n\r\n;(function (win) {\r\n\t\"use strict\"\r\n\twin.userId = getQueryParams(\"userId\")\r\n\twin.pairId = getQueryParams(\"pairId\")\r\n\twin.av = getQueryParams(\"av\")\r\n\twin.token = getQueryParams(\"token\")\r\n\twin.heartPercent = getQueryParams(\"heartPercent\", \"\")\r\n\twin.client = getQueryParams(\"client\", device.os)\r\n\twin.telephone = getQueryParams(\"phone\", \"\")\r\n\r\n\timport.meta.env.MODE != \"development\" && checkVersion()\r\n})(window.sessionStorage)\r\n","import { createApp } from 'vue'\r\nimport '@/assets/css/common.scss'\r\nimport 'vant/es/toast/style';\r\nimport App from './App.vue'\r\nimport 'amfe-flexible'\r\nimport router from './router'\r\nimport pinia from './store'\r\nimport { FadeTransition } from './utils/transition'\r\nimport { setToastDefaultOptions } from 'vant'\r\nimport './utils/before'\r\n\r\nsetToastDefaultOptions({ className: 'my-toast', position: 'bottom' })\r\n\r\nconst env = import.meta.env.VITE_NODE_ENV\r\nconsole.log(env)\r\nif (env !== 'production') {\r\n\t(async () => {\r\n\t\tconst VConsole = await import(\"vconsole\").then(res => res.default)\r\n\t\tnew VConsole()\r\n\t})()\r\n}\r\n\r\nconst app = createApp(App)\r\n\r\napp.use(FadeTransition).use(router).use(pinia).mount('#app')\r\n"],"file":"assets/index-a89aee85.js"}