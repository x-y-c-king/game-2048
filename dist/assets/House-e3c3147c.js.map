{"version":3,"file":"House-e3c3147c.js","sources":["../../src/components/HourseGoods.vue","../../src/api/index.ts","../../src/view/House.vue"],"sourcesContent":["<template>\r\n\t<div class=\"hourse-goods\" ref=\"gooodsRef\" @click=\"onClick\">\r\n\t\t<img :src=\"item.img\" alt=\"\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { nextTick } from \"vue\"\r\nimport { onMounted } from \"vue\"\r\nimport { ref } from \"vue\"\r\nimport { xdJsbridge } from \"wnl-xdsdk\";\r\n\r\ntype ItemData = {\r\n\taction: string\r\n\tbeginDate: number | null\r\n\tbeginVersion: string\r\n\tcanDelete: boolean\r\n\tcanMove: boolean\r\n\tcategoryId: number\r\n\tcategory_name: string\r\n\tendDate: number | null\r\n\textra: number | null\r\n\tgoodsId: number\r\n\theight: number\r\n\timg: string\r\n\tlocalImg: string\r\n\tname: string\r\n\twidth: number\r\n\tx: number\r\n\ty: number\r\n}\r\nconst gooodsRef = ref<HTMLDivElement>()\r\nconst props = withDefaults(defineProps<{ item: ItemData; proportions: number }>(), {})\r\n\r\nconst setGoodsStyle = <T extends keyof CSSStyleDeclaration>(\r\n\tkey: T,\r\n\tvalue: CSSStyleDeclaration[T]\r\n) => {\r\n\tif (gooodsRef.value) {\r\n\t\tgooodsRef.value.style[key] = value\r\n\t}\r\n}\r\n\r\nconst getSize = (old:number) => {\r\n  return `${old * props.proportions}px`\r\n}\r\n\r\nconst onClick = () => {\r\n  if(props.item.action) {\r\n    xdJsbridge.jumpPage(props.item.action)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n\tnextTick(() => {\r\n\t\tsetGoodsStyle(\"width\", getSize(props.item.width))\r\n\t\tsetGoodsStyle(\"height\", getSize(props.item.height))\r\n    setGoodsStyle(\"left\", getSize(props.item.x))\r\n    setGoodsStyle(\"top\", getSize(props.item.y))\r\n    \r\n\t})\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.hourse-goods {\r\n\tposition: absolute;\r\n\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n</style>\r\n","import { HttpRequest } from \"wnl-xdsdk\"\r\n\r\nif (typeof process === \"undefined\") {\r\n\twindow.process = import.meta.env\r\n}\r\n\r\nconst { get, post, axios } = new HttpRequest(\"\", \"\", \"\", sessionStorage)\r\n\r\naxios.interceptors.request.use((config) => {\r\n\tconst params = config.params\r\n\tconst { userId, pairId, channel, client } = window.sessionStorage\r\n\tconfig.params = {\r\n\t\tuserid: userId,\r\n\t\tpairid: pairId,\r\n\t\tchannel,\r\n\t\tclient,\r\n\t\t...params\r\n\t}\r\n\tif (config.method === \"post\") {\r\n\t\tconfig.headers = {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t...config.headers\r\n\t\t}\r\n\t}\r\n\r\n\treturn config\r\n})\r\n\r\ntype Result = {\r\n\tstatus: number\r\n\tdata: any\r\n\tmsg: string\r\n}\r\n\r\n/**下单 */\r\nconst placeAnOrder = (url: string, body = {}, params = {}) => post<Result>(url, body, params)\r\n\r\n/**  */\r\nconst getMatchStatus = (params = {}) => get<Result>(`/user/getMatchStatus`, params)\r\n\r\nconst getAllGoods = (params = {}) => get<Result>(`/coser/v2/classify_goods`, params)\r\n\r\nconst getHomeIndex = (pairid: any, params = {}) => get<Result>(`/home/index/${pairid}`, params)\r\n\r\nexport { getMatchStatus, placeAnOrder, getAllGoods, getHomeIndex, get }\r\n","<template>\r\n\t<div class=\"hourse\" ref=\"hourse\">\r\n\t\t<HourseGoods :item=\"item\" v-for=\"item in state.goodsList\" :proportions=\"proportions\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport HourseGoods from \"@/components/HourseGoods.vue\"\r\nimport { onMounted, ref, reactive } from \"vue\"\r\nimport { getHomeIndex } from \"@/api\"\r\nimport { nextTick } from \"vue\"\r\n\r\nconst hourse = ref<HTMLDivElement>()\r\nconst proportions = ref(1)\r\nconst state = reactive<{ goodsList: any[] }>({\r\n\tgoodsList: []\r\n})\r\n\r\nconst setHourseStyle = <T extends keyof CSSStyleDeclaration>(\r\n\tkey: T,\r\n\tvalue: CSSStyleDeclaration[T]\r\n) => {\r\n\tif (hourse.value) {\r\n\t\thourse.value.style[key] = value\r\n\t}\r\n}\r\n\r\n// setHourseStyle(\"\")\r\n\r\nonMounted(() => {\r\n\tgetHomeIndex(window.sessionStorage.getItem(\"pairId\")).then((res) => {\r\n\t\tif (res.status == 200) {\r\n\t\t\t// console.log(res.data)\r\n\t\t\tconst { center_x, goods, height, width } = res.data\r\n\t\t\tconst clientHeight =\r\n\t\t\t\tdocument.documentElement.clientHeight || document.body.clientHeight || 812\r\n\t\t\tnextTick(() => {\r\n\t\t\t\tconst prop = clientHeight / height\r\n\t\t\t\t// console.log(clientHeight / height)\r\n\t\t\t\tproportions.value = prop\r\n\t\t\t\tsetHourseStyle(\"width\", `${Math.floor(width * prop)}px`)\r\n\t\t\t\tsetHourseStyle(\"height\", `${Math.floor(height * prop)}px`)\r\n\t\t\t\t\r\n\t\t\t\tstate.goodsList = goods\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log(clientHeight, height, width, center_x)\r\n\t\t}\r\n\t})\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.hourse {\r\n\tbackground-color: red;\r\n\tposition: relative;\r\n}\r\n</style>\r\n"],"names":["gooodsRef","ref","setGoodsStyle","key","value","getSize","old","props","onClick","xdJsbridge","onMounted","nextTick","get","post","axios","HttpRequest","config","params","userId","pairId","channel","client","getHomeIndex","pairid","hourse","proportions","state","reactive","setHourseStyle","res","center_x","goods","height","width","clientHeight","prop"],"mappings":"iQA+BAA,EAAAC,IAGAC,EAAA,CAAAC,EAAAC,IAAA,CAICJ,EAAA,QACCA,EAAA,MAAA,MAAAG,CAAA,EAAAC,EACD,EAGDC,EAAAC,GACE,GAAA,OAAAA,EAAAC,EAAA,YAAA,MAGFC,EAAA,IAAA,CACED,EAAA,KAAA,QACEE,EAAA,SAAAF,EAAA,KAAA,MAAA,CACF,EAGF,OAAAG,EAAA,IAAA,CACCC,EAAA,IAAA,CACCT,EAAA,QAAAG,EAAAE,EAAA,KAAA,KAAA,CAAA,EACAL,EAAA,SAAAG,EAAAE,EAAA,KAAA,MAAA,CAAA,EACEL,EAAA,OAAAG,EAAAE,EAAA,KAAA,CAAA,CAAA,EACAL,EAAA,MAAAG,EAAAE,EAAA,KAAA,CAAA,CAAA,CAA0C,CAAA,CAE5C,CAAA,qLC1DE,OAAO,QAAY,MACtB,OAAO,QAAU,gIAGlB,KAAM,CAAE,IAAAK,EAAK,KAAAC,EAAM,MAAAC,GAAU,IAAIC,EAAY,GAAI,GAAI,GAAI,cAAc,EAEvED,EAAM,aAAa,QAAQ,IAAKE,GAAW,CAC1C,MAAMC,EAASD,EAAO,OAChB,CAAE,OAAAE,EAAQ,OAAAC,EAAQ,QAAAC,EAAS,OAAAC,GAAW,OAAO,eACnD,OAAAL,EAAO,OAAS,CACf,OAAQE,EACR,OAAQC,EACR,QAAAC,EACA,OAAAC,EACA,GAAGJ,CAAA,EAEAD,EAAO,SAAW,SACrBA,EAAO,QAAU,CAChB,eAAgB,mBAChB,GAAGA,EAAO,OAAA,GAILA,CACR,CAAC,EAgBD,MAAMM,EAAe,CAACC,EAAaN,EAAS,KAAOL,EAAY,eAAe,OAAAW,GAAUN,CAAM,+BC9B9F,MAAAO,EAAAvB,IACAwB,EAAAxB,EAAA,CAAA,EACAyB,EAAAC,EAAA,CAA6C,UAAA,CAAA,CAChC,CAAA,EAGbC,EAAA,CAAAzB,EAAAC,IAAA,CAICoB,EAAA,QACCA,EAAA,MAAA,MAAArB,CAAA,EAAAC,EACD,EAKD,OAAAM,EAAA,IAAA,CACCY,EAAA,OAAA,eAAA,QAAA,QAAA,CAAA,EAAA,KAAAO,GAAA,CACC,GAAAA,EAAA,QAAA,IAAA,CAEC,KAAA,CAAA,SAAAC,EAAA,MAAAC,EAAA,OAAAC,EAAA,MAAAC,CAAA,EAAAJ,EAAA,KACAK,EAAA,SAAA,gBAAA,cAAA,SAAA,KAAA,cAAA,IAEAvB,EAAA,IAAA,CACC,MAAAwB,EAAAD,EAAAF,EAEAP,EAAA,MAAAU,EACAP,EAAA,QAAA,GAAA,YAAA,MAAAK,EAAAE,CAAA,EAAA,KAAA,EACAP,EAAA,SAAA,GAAA,YAAA,MAAAI,EAAAG,CAAA,EAAA,KAAA,EAEAT,EAAA,UAAAK,CAAkB,CAAA,EAGnB,QAAA,IAAAG,EAAAF,EAAAC,EAAAH,CAAA,CAAiD,CAClD,CAAA,CACA,CAAA"}