{"version":3,"file":"index-legacy-258544ee.js","sources":["../../src/utils/trackBefore.ts","../../src/router/index.ts","../../src/store/index.ts","../../src/utils/transition.ts","../../src/utils/before.ts","../../src/main.ts"],"sourcesContent":["const isBuried = import.meta.env.VITE_BURIED\r\nconsole.log('是否开启h5埋点', isBuried)\r\n\r\nif (isBuried === 'true') {\r\n  (function (w: any, d: Document, s: \"script\", q: string, i: string) {\r\n    w[q] = w[q] || [];\r\n    var j = d.createElement(s)\r\n    var f = d.getElementsByTagName(s)[0] \r\n    j.async = true;\r\n    j.id = 'beacon-aplus';\r\n    j.src = 'https://d.alicdn.com/alilog/mlog/aplus/' + i + '.js';\r\n    f.parentNode?.insertBefore(j, f);\r\n  })(window, document, 'script', 'aplus_queue', '203467608');\r\n\r\n  const { aplus_queue } = window\r\n  // 集成应用的appKey\r\n  aplus_queue.push({\r\n    action: 'aplus.setMetaInfo',\r\n    arguments: ['appKey', '63969d7c88ccdf4b7ea1ef25']\r\n  });\r\n\r\n  // 关闭自动pv\r\n  aplus_queue.push({\r\n    action: 'aplus.setMetaInfo',\r\n    arguments: ['aplus-waiting', 'MAN']\r\n  });\r\n}","import { createRouter, createWebHashHistory } from 'vue-router'\r\n\r\ndeclare module 'vue-router' {\r\n\tinterface RouteMeta {\r\n\t\ttitle: string\r\n\t}\r\n}\r\n\r\nexport const routes = [\r\n\t{\r\n\t\tpath: \"/\",\r\n\t\tname: \"home\",\r\n\t\tcomponent: () => import(\"../view/Protocol.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"首页\"\r\n\t\t}\r\n\t},{\r\n\t\tpath: \"/hourse\",\r\n\t\tname: \"hourse\",\r\n\t\tcomponent: () => import(\"../view/House.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"小屋\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: \"/about\",\r\n\t\tname: \"about\",\r\n\t\tcomponent: () => import(\"../view/About.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"关于我们\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: '/circle',\r\n\t\tname: 'circle',\r\n\t\tcomponent: () => import(\"../view/Circle.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"圈子3.3.3交互协议\"\r\n\t\t}\r\n\t},  {\r\n\t\tpath: '/script',\r\n\t\tname: 'script',\r\n\t\tcomponent: () => import(\"../view/Script.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"字符串\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: '/saveMedieFile',\r\n\t\tname: 'saveMedieFile',\r\n\t\tcomponent: () => import(\"../view/SaveMedieFile.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"保存文件\"\r\n\t\t}\r\n\t}, {\r\n\t\tpath: '/test',\r\n\t\tname: 'test',\r\n\t\tcomponent: () => import(\"../view/Test.vue\"),\r\n\t\tmeta: {\r\n\t\t\ttitle: \"test\"\r\n\t\t}\r\n\t}\r\n]\r\n\r\nconst router = createRouter({\r\n\thistory: createWebHashHistory(),\r\n\troutes,\r\n\tscrollBehavior(_to, _from, savedPosition) {\r\n\t\tif (savedPosition) {\r\n\t\t\treturn savedPosition\r\n\t\t}\r\n\t\treturn { left: 0, top: 0 }\r\n\t}\r\n})\r\n\r\nrouter.beforeEach((to, _from, next) => {\r\n\t// \\u200E 空title\r\n\tdocument.title = to.meta.title\r\n\tnext()\r\n})\r\nexport default router\r\n","import { createPinia, defineStore } from 'pinia'\r\nimport piniaPluginPersist from 'pinia-plugin-persistedstate'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport const useStore = defineStore(\"index\", () => {\r\n  const id = ref(1)\r\n  const count = ref(0)\r\n\r\n  const getter = computed(() => id)\r\n\r\n  const add = () => count.value++\r\n  const cut = () => count.value--\r\n\r\n  return { id, count, getter, add, cut }\r\n}, { persist: false })\r\n\r\n\r\nconst pinia = createPinia()\r\npinia.use(piniaPluginPersist)\r\n\r\nexport default pinia","import { reactive, h, KeepAlive, Transition } from 'vue'\r\nimport router from '../router/index'\r\n\r\nclass Stack {\r\n\tprivate data: string[]\r\n\tconstructor() {\r\n\t\tthis.data = [];\r\n\t}\r\n\tget() {\r\n\t\tlet length = this.data.length;\r\n\t\tif (length === 0) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn this.data[length - 1];\r\n\t}\r\n\tpop() {\r\n\t\treturn this.data.pop();\r\n\t}\r\n\r\n\tincludes(name: string) {\r\n\t\treturn this.data.includes(name);\r\n\t}\r\n\tpush(name: string) {\r\n\t\tthis.data.push(name);\r\n\t}\r\n\r\n\tsplice(start: number, end: number) {\r\n\t\tthis.data = this.data.slice(start, end);\r\n\t}\r\n}\r\n\r\nconst stack = new Stack();\r\nconst state = reactive<{ caches: string[], name: string }>({\r\n\tcaches: [],\r\n\tname: ''\r\n})\r\n\r\nconst popCache = () => {\r\n\tif (state.caches.length > 0) {\r\n\t\tstate.caches.pop();\r\n\t}\r\n};\r\nconst addCache = (name: string) => {\r\n\tstate.caches.push(name);\r\n};\r\n\r\n/** 有好方法可以优化页面是进入还是退出 */\r\nrouter.beforeEach((to, from, next) => {\r\n\t// 前进存入，后退清除\r\n\tconst fromName = from.name as string;\r\n\tconst toName = to.name as string;\r\n\tif (fromName) {\r\n\t\tif (stack.get() === toName) {\r\n\t\t\tstack.pop();\r\n\t\t\tstate.name = 'left-out'\r\n\t\t\t// editState(\"left-out\");\r\n\t\t\tpopCache();\r\n\t\t} else if (to.query.replace === \"replace\") {\r\n\t\t\tstate.name = 'right-in'\r\n\t\t\tstate.caches.pop();\r\n\t\t\tstate.caches.push(toName)\r\n\t\t} else {\r\n\t\t\tstack.push(fromName);\r\n\t\t\tstate.name = 'right-in'\r\n\t\t\taddCache(toName);\r\n\t\t}\r\n\t} else {\r\n\t\taddCache(toName);\r\n\t}\r\n\r\n\tnext()\r\n})\r\n\r\nexport const FadeTransition = {\r\n\tinstall(app: any) {\r\n\t\t// 配置此应用\r\n\t\tconst component = {\r\n\t\t\tname: 'FadeTransition',\r\n\t\t\tfunctional: true,\r\n\t\t\trender(app: any) {\r\n\t\t\t\tconst slots = app.$slots\r\n\t\t\t\tconst keepAlive = [h(KeepAlive,\r\n\t\t\t\t\t{ include: state.caches },\r\n\t\t\t\t\tslots.default())]\r\n\r\n\t\t\t\tconst transition = h(\r\n\t\t\t\t\tTransition,\r\n\t\t\t\t\t{ name: state.name },\r\n\t\t\t\t\t() => keepAlive\r\n\t\t\t\t)\r\n\t\t\t\treturn transition\r\n\t\t\t}\r\n\t\t}\r\n\t\tapp.component(\"FadeTransition\", component)\r\n\t}\r\n}\r\n\r\nexport default {}","import { device, getQueryParams, xdJsbridge } from \"wnl-xdsdk\"\r\n\r\n// 检查版本\r\nconst checkVersion = () => {\r\n\tfetch(\"version.json?t=\" + new Date().getTime())\r\n\t\t.then((res) => {\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\treturn res.json()\r\n\t\t\t}\r\n\t\t\treturn Promise.reject(res)\r\n\t\t})\r\n\t\t.then((remote) => {\r\n\t\t\tconsole.log(\"t\", remote.t)\r\n\t\t\tconst time = localStorage.getItem(\"lastModified\")\r\n\t\t\tconsole.log(\"time\", time)\r\n\r\n\t\t\tif (time == null || time == remote.t) {\r\n\t\t\t\tconsole.log(\"版本一致\")\r\n\t\t\t\tlocalStorage.setItem(\"lastModified\", remote.t)\r\n\t\t\t} else {\r\n\t\t\t\txdJsbridge.popup({\r\n\t\t\t\t\ttitle: \"提示\",\r\n\t\t\t\t\tcontent: \"检测到有新版本，请刷新页面\",\r\n\t\t\t\t\tcancel: '',\r\n\t\t\t\t\tconfirm: '刷新'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlocalStorage.setItem(\"lastModified\", remote.t)\r\n\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n}\r\n\r\n;(function (win) {\r\n\t\"use strict\"\r\n\twin.userId = getQueryParams(\"userId\")\r\n\twin.pairId = getQueryParams(\"pairId\")\r\n\twin.av = getQueryParams(\"av\")\r\n\twin.token = getQueryParams(\"token\")\r\n\twin.heartPercent = getQueryParams(\"heartPercent\", \"\")\r\n\twin.client = getQueryParams(\"client\", device.os)\r\n\twin.telephone = getQueryParams(\"phone\", \"\")\r\n\r\n\timport.meta.env.MODE != \"development\" && checkVersion()\r\n})(window.sessionStorage)\r\n","import { createApp } from 'vue'\r\nimport '@/assets/css/common.scss'\r\nimport 'vant/es/toast/style';\r\nimport App from './App.vue'\r\nimport 'amfe-flexible'\r\nimport router from './router'\r\nimport pinia from './store'\r\nimport { FadeTransition } from './utils/transition'\r\nimport { setToastDefaultOptions } from 'vant'\r\nimport './utils/before'\r\n\r\nsetToastDefaultOptions({ className: 'my-toast', position: 'bottom' })\r\n\r\nconst env = import.meta.env.VITE_NODE_ENV\r\nconsole.log(env)\r\nif (env !== 'production') {\r\n\t(async () => {\r\n\t\tconst VConsole = await import(\"vconsole\").then(res => res.default)\r\n\t\tnew VConsole()\r\n\t})()\r\n}\r\n\r\nconst app = createApp(App)\r\n\r\napp.use(FadeTransition).use(router).use(pinia).mount('#app')\r\n"],"names":["console","log","routes","path","name","component","__vitePreload","module","__VITE_IS_MODERN__","meta","title","router","createRouter","history","createWebHashHistory","scrollBehavior","_to","_from","savedPosition","left","top","beforeEach","to","next","document","defineStore","id","ref","count","getter","computed","add","value","cut","persist","pinia","createPinia","use","piniaPluginPersist","stack","Stack","_classCallCheck","this","data","key","length","pop","includes","push","start","end","slice","state","reactive","caches","addCache","from","fromName","toName","get","query","replace","win","FadeTransition","install","app","functional","render","slots","$slots","keepAlive","h","KeepAlive","include","default","Transition","window","sessionStorage","userId","getQueryParams","pairId","av","token","heartPercent","client","device","os","telephone","fetch","Date","getTime","then","res","status","json","Promise","reject","remote","t","time","localStorage","getItem","setItem","xdJsbridge","popup","content","cancel","confirm","location","reload","setToastDefaultOptions","className","position","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","import","n","v","url","VConsole","sent","stop","createApp","App","mount"],"mappings":"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"}