{"version":3,"file":"House-legacy-27b0b69b.js","sources":["../../src/components/HourseGoods.vue","../../src/api/index.ts","../../src/view/House.vue"],"sourcesContent":["<template>\r\n\t<div class=\"hourse-goods\" ref=\"gooodsRef\" @click=\"onClick\">\r\n\t\t<img :src=\"item.img\" alt=\"\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { nextTick } from \"vue\"\r\nimport { onMounted } from \"vue\"\r\nimport { ref } from \"vue\"\r\nimport { xdJsbridge } from \"wnl-xdsdk\";\r\n\r\ntype ItemData = {\r\n\taction: string\r\n\tbeginDate: number | null\r\n\tbeginVersion: string\r\n\tcanDelete: boolean\r\n\tcanMove: boolean\r\n\tcategoryId: number\r\n\tcategory_name: string\r\n\tendDate: number | null\r\n\textra: number | null\r\n\tgoodsId: number\r\n\theight: number\r\n\timg: string\r\n\tlocalImg: string\r\n\tname: string\r\n\twidth: number\r\n\tx: number\r\n\ty: number\r\n}\r\nconst gooodsRef = ref<HTMLDivElement>()\r\nconst props = withDefaults(defineProps<{ item: ItemData; proportions: number }>(), {})\r\n\r\nconst setGoodsStyle = <T extends keyof CSSStyleDeclaration>(\r\n\tkey: T,\r\n\tvalue: CSSStyleDeclaration[T]\r\n) => {\r\n\tif (gooodsRef.value) {\r\n\t\tgooodsRef.value.style[key] = value\r\n\t}\r\n}\r\n\r\nconst getSize = (old:number) => {\r\n  return `${old * props.proportions}px`\r\n}\r\n\r\nconst onClick = () => {\r\n  if(props.item.action) {\r\n    xdJsbridge.jumpPage(props.item.action)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n\tnextTick(() => {\r\n\t\tsetGoodsStyle(\"width\", getSize(props.item.width))\r\n\t\tsetGoodsStyle(\"height\", getSize(props.item.height))\r\n    setGoodsStyle(\"left\", getSize(props.item.x))\r\n    setGoodsStyle(\"top\", getSize(props.item.y))\r\n    \r\n\t})\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.hourse-goods {\r\n\tposition: absolute;\r\n\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n</style>\r\n","import { HttpRequest } from \"wnl-xdsdk\"\r\n\r\nif (typeof process === \"undefined\") {\r\n\twindow.process = import.meta.env\r\n}\r\n\r\nconst { get, post, axios } = new HttpRequest(\"\", \"\", \"\", sessionStorage)\r\n\r\naxios.interceptors.request.use((config) => {\r\n\tconst params = config.params\r\n\tconst { userId, pairId, channel, client } = window.sessionStorage\r\n\tconfig.params = {\r\n\t\tuserid: userId,\r\n\t\tpairid: pairId,\r\n\t\tchannel,\r\n\t\tclient,\r\n\t\t...params\r\n\t}\r\n\tif (config.method === \"post\") {\r\n\t\tconfig.headers = {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t...config.headers\r\n\t\t}\r\n\t}\r\n\r\n\treturn config\r\n})\r\n\r\ntype Result = {\r\n\tstatus: number\r\n\tdata: any\r\n\tmsg: string\r\n}\r\n\r\n/**下单 */\r\nconst placeAnOrder = (url: string, body = {}, params = {}) => post<Result>(url, body, params)\r\n\r\n/**  */\r\nconst getMatchStatus = (params = {}) => get<Result>(`/user/getMatchStatus`, params)\r\n\r\nconst getAllGoods = (params = {}) => get<Result>(`/coser/v2/classify_goods`, params)\r\n\r\nconst getHomeIndex = (pairid: any, params = {}) => get<Result>(`/home/index/${pairid}`, params)\r\n\r\nexport { getMatchStatus, placeAnOrder, getAllGoods, getHomeIndex, get }\r\n","<template>\r\n\t<div class=\"hourse\" ref=\"hourse\">\r\n\t\t<HourseGoods :item=\"item\" v-for=\"item in state.goodsList\" :proportions=\"proportions\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport HourseGoods from \"@/components/HourseGoods.vue\"\r\nimport { onMounted, ref, reactive } from \"vue\"\r\nimport { getHomeIndex } from \"@/api\"\r\nimport { nextTick } from \"vue\"\r\n\r\nconst hourse = ref<HTMLDivElement>()\r\nconst proportions = ref(1)\r\nconst state = reactive<{ goodsList: any[] }>({\r\n\tgoodsList: []\r\n})\r\n\r\nconst setHourseStyle = <T extends keyof CSSStyleDeclaration>(\r\n\tkey: T,\r\n\tvalue: CSSStyleDeclaration[T]\r\n) => {\r\n\tif (hourse.value) {\r\n\t\thourse.value.style[key] = value\r\n\t}\r\n}\r\n\r\n// setHourseStyle(\"\")\r\n\r\nonMounted(() => {\r\n\tgetHomeIndex(window.sessionStorage.getItem(\"pairId\")).then((res) => {\r\n\t\tif (res.status == 200) {\r\n\t\t\t// console.log(res.data)\r\n\t\t\tconst { center_x, goods, height, width } = res.data\r\n\t\t\tconst clientHeight =\r\n\t\t\t\tdocument.documentElement.clientHeight || document.body.clientHeight || 812\r\n\t\t\tnextTick(() => {\r\n\t\t\t\tconst prop = clientHeight / height\r\n\t\t\t\t// console.log(clientHeight / height)\r\n\t\t\t\tproportions.value = prop\r\n\t\t\t\tsetHourseStyle(\"width\", `${Math.floor(width * prop)}px`)\r\n\t\t\t\tsetHourseStyle(\"height\", `${Math.floor(height * prop)}px`)\r\n\t\t\t\t\r\n\t\t\t\tstate.goodsList = goods\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log(clientHeight, height, width, center_x)\r\n\t\t}\r\n\t})\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.hourse {\r\n\tbackground-color: red;\r\n\tposition: relative;\r\n}\r\n</style>\r\n"],"names":["gooodsRef","ref","setGoodsStyle","key","value","style","getSize","old","concat","props","proportions","onClick","item","action","xdJsbridge","jumpPage","onMounted","nextTick","width","height","x","y","process","window","_q","HttpRequest","sessionStorage","get","post","axios","interceptors","request","use","config","params","_window$sessionStorag","userId","pairId","channel","client","_objectSpread","userid","pairid","method","headers","hourse","state","reactive","goodsList","setHourseStyle","arguments","length","undefined","getHomeIndex","getItem","then","res","status","_res$data","data","center_x","goods","clientHeight","document","documentElement","body","prop","Math","floor","console","log"],"mappings":"63DA+BAA,EAAAC,IAGAC,EAAA,SAAAC,EAAAC,GAICJ,EAAAI,QACCJ,EAAAI,MAAAC,MAAAF,GAAAC,EACD,EAGDE,EAAA,SAAAC,GACE,MAAA,GAAAC,OAAAD,EAAAE,EAAAC,YAAiC,KAAA,EAGnCC,EAAA,WACEF,EAAAG,KAAAC,QACEC,EAAAC,SAAAN,EAAAG,KAAAC,OACF,SAGFG,GAAA,WACCC,GAAA,WACCf,EAAA,QAAAI,EAAAG,EAAAG,KAAAM,QACAhB,EAAA,SAAAI,EAAAG,EAAAG,KAAAO,SACEjB,EAAA,OAAAI,EAAAG,EAAAG,KAAAQ,IACAlB,EAAA,MAAAI,EAAAG,EAAAG,KAAAS,GAA0C,GAE5C,wLC1DqB,oBAAZC,UACVC,OAAOD,QAAU,gIAGlB,IAAAE,EAA6B,IAAIC,EAAY,GAAI,GAAI,GAAIC,gBAAjDC,EAAKH,EAALG,IAAKH,EAAAI,KAAYJ,EAANK,MAEbC,aAAaC,QAAQC,KAAI,SAACC,GAC/B,IAAMC,EAASD,EAAOC,OACtBC,EAA4CZ,OAAOG,eAA3CU,EAAQD,EAARC,OAAQC,EAAAF,EAAAE,OAAQC,EAASH,EAATG,QAASC,EAAAJ,EAAAI,OAe1B,OAdPN,EAAOC,OAASM,GACfC,OAAQL,EACRM,OAAQL,EACRC,QAAAA,EACAC,OAAAA,GACGL,GAEkB,SAAlBD,EAAOU,SACVV,EAAOW,QAAUJ,EAAA,CAChB,eAAgB,oBACbP,EAAOW,UAILX,CACR,IAgBA,0CC9BA,IAAAY,EAAA5C,IACAS,EAAAT,EAAA,GACA6C,EAAAC,EAAA,CAA6CC,UAAA,KAI7CC,EAAA,SAAA9C,EAAAC,GAICyC,EAAAzC,QACCyC,EAAAzC,MAAAC,MAAAF,GAAAC,EACD,SAKDY,GAAA,YDaqB,SAAC0B,GAAA,IAAaR,EAASgB,UAAAC,OAAAD,QAAAE,IAAAF,aAAAA,UAAA,GAAA,GAAO,OAAAvB,EAAY,eAAAnB,OAAekC,GAAUR,ICZvFmB,CAAA9B,OAAAG,eAAA4B,QAAA,WAAAC,MAAA,SAAAC,GACC,GAAA,KAAAA,EAAAC,OAAA,CAEC,IAAAC,EAAAF,EAAAG,KAAAC,EAAAF,EAAAE,SAAAC,EAAAH,EAAAG,MAAA1C,EAAAuC,EAAAvC,OAAAD,EAAAwC,EAAAxC,MACA4C,EAAAC,SAAAC,gBAAAF,cAAAC,SAAAE,KAAAH,cAAA,IAEA7C,GAAA,WACC,IAAAiD,EAAAJ,EAAA3C,EAEAT,EAAAN,MAAA8D,EACAjB,EAAA,QAAAzC,GAAAA,OAAA2D,KAAAC,MAAAlD,EAAAgD,GAAA,OACAjB,EAAA,SAAAzC,GAAAA,OAAA2D,KAAAC,MAAAjD,EAAA+C,GAAA,OAEApB,EAAAE,UAAAa,CAAkB,IAGnBQ,QAAAC,IAAAR,EAAA3C,EAAAD,EAAA0C,EAAiD,CAClD,GACA"}